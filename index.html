<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <title>家具生成</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css">
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.159/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.159/examples/jsm/"
    }
  }
  </script>
</head>

<body>
  <header>
    <h1>家具生成</h1>
    <div class="right">
      <button id="btnReset">初期状態に戻す</button>
      <button id="btnExport">設定を保存(JSON)</button>
      <label class="import">
        設定を読み込み(JSON)
        <input id="importJson" type="file" accept="application/json" hidden>
      </label>
    </div>
  </header>

  <main>
    <!-- 左パネル -->
    <aside>
      <div class="block">
        <h2>家具一覧</h2>
        <div id="furnList" class="furn-grid"></div>
        <p class="hint">※ 同フォルダの GLB を読み込みます（例：机.glb / ソファ.glb）。</p>
      </div>

      <div class="block">
        <h2>パーツ一覧</h2>
        <div id="parts" class="list"></div>
      </div>
    </aside>

    <!-- 中央ビュー -->
    <section id="viewport">
      <canvas id="canvas"></canvas>
    </section>

    <!-- 右パネル -->
    <aside>
      <div class="block">
        <h2>選択中パーツ</h2>
        <div id="current">—</div>
        <div class="row mid">
          <button id="btnIsolate">選択を強調表示</button>
          <button id="btnShowAll">全表示</button>
        </div>
      </div>

      <div class="block">
        <h2>外寸（m）</h2>
        <div class="row">
          <label>横幅(X)</label>
          <input class="sizeInput" id="sizeX" type="number" min="0" step="0.01" value="1.20">
        </div>
        <div class="row">
          <label>高さ(Y)</label>
          <input class="sizeInput" id="sizeY" type="number" min="0" step="0.01" value="0.75">
        </div>
        <div class="row">
          <label>奥行(Z)</label>
          <input class="sizeInput" id="sizeZ" type="number" min="0" step="0.01" value="0.60">
        </div>
        <div class="row">
          <button id="btnApplySize">この寸法に合わせる</button>
          <span class="hint">※ 外形（バウンディングボックス）で合わせます。</span>
        </div>
      </div>

      <!-- マテリアル：色のみ -->
      <div class="block">
        <h2>マテリアル</h2>
        <div class="row">
          <label>色</label>
          <input id="uiColor" type="color" value="#8a5a2b">
          <button id="btnApplyColor">適用</button>
        </div>
        <p class="hint">選択中パーツに適用。未選択なら全パーツに適用します。</p>
      </div>
    </aside>
  </main>

  <script type="module" src="./script.js"></script>
</body>

</html>
